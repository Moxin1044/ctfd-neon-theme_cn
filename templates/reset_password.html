{% extends "base.html" %}

{% block stylesheets %}{% endblock %}

{% block content %}
  <div class="container py-5 mb-5">
    <h1 class="text-center">密码重置<span class="vim-caret">͏͏&nbsp;&nbsp;</span>
    </h1>
  </div>
  <div class="container">
    <div class="row">
      <div class="col-md-6 offset-md-3">
        {% include "components/errors.html" %}

        {% if mode == "set" %}
          {% with form = Forms
            .auth
            .ResetPasswordForm() %}
          <form method="post" accept-charset="utf-8" autocomplete="off" role="form" class="form-horizontal">
            <div class="row">
              <div class="col-md-12">
                <p>您现在可以重置帐户密码并登录，请在下面输入新密码。</p>
              </div>
            </div>
            <div class="form-group">
              {{ form.password.label }}
              {{ form.password(class="form-control") }}
            </div>
            <div class="row">
              <div class="col-md-6 offset-md-6">
                {{ form.submit(class="btn btn-md btn-primary float-right") }}
              </div>
            </div>
            {{ form.nonce() }}
          </form>
          {% endwith %}
        {% else %}
          {% with form = Forms
            .auth
            .ResetPasswordRequestForm() %}
          <form method="post" accept-charset="utf-8" autocomplete="off" role="form" class="form-horizontal">
            <div class="row">
              <div class="col-md-12">
                <p>请提供以下与您的帐户相关的电子邮件地址。</p>
              </div>
            </div>
            <div class="form-group">
              {{ form.email.label }}
              {{ form.email(class="form-control") }}
            </div>
            <div class="row">
              <div class="col-md-6 offset-md-6">
                {{ form.submit(class="btn btn-md btn-primary float-right") }}
              </div>
            </div>
            {{ form.nonce() }}
          </form>
          {% endwith %}
        {% endif %}
      </div>
    </div>
  </div>
{% endblock %}

{% block scripts %}{% endblock %}
